<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/static/coasters.png">
    <title>SRB Coasters</title>
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <div id="app">
      <router-view></router-view>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function(event) {


        // if (false) {
        if (isSafari()) {
          document.body.classList.add('safari');

          var initialHeight = getHeight();

          // window.setTimeout(function () {
          //   initialHeight = getHeight();
          //   alert(initialHeight)
          // }, 2000)

          function getHeight() {
            var w=window,
            d=document,
            e=d.documentElement,
            g=d.getElementsByTagName('body')[0],
            // x=w.innerWidth||e.clientWidth||g.clientWidth,
            y=w.innerHeight||e.clientHeight||g.clientHeight;

            return Math.max(document.documentElement.clientHeight, window.innerHeight || 0);;

          }

          (function() {
            var throttle = function(type, name, obj) {
              obj = obj || window;
              var running = false;
              var func = function() {
                if (running) { return; }
                running = true;
                requestAnimationFrame(function() {
                  obj.dispatchEvent(new CustomEvent(name));
                  running = false;
                });
              };
              obj.addEventListener(type, func);
            };

            /* init - you can init any event */
            throttle("resize", "optimizedResize");
          })();

          // handle event
          window.addEventListener("optimizedResize", function() {
            //if newHeight > initialHeight && did not load in landscape
            var newHeight = getHeight();
            // alert(newHeight/initialHeight);
            if (newHeight > initialHeight && newHeight/initialHeight < 1.3) {
              document.body.classList.add('fullscreen');
            } else {
              document.body.classList.remove('fullscreen');
            }
            // var myString = 'initialHeight: ' + initialHeight + ', afterResize: ' + afterResize;
            // alert(myString)
          });

        }



      });

      function isSafari () {
        var uAStr = navigator.userAgent;
        if (uAStr.indexOf('iPhone') != -1 && uAStr.indexOf('Safari') != -1 && uAStr.indexOf('CriOS') == -1) {
          return true;
        }

      }
    </script>
    <script src="dist/build.js"></script>
  </body>
</html>
