<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/static/coasters.png">
    <title>SRB Coasters</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <div id="app">
      <router-view></router-view>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function(event) {

        if (isSafari()) {

          // alert('safari');
          document.body.classList.add('safari');

          var initialHeight = getHeight();

          function getHeight() {
            var w=window,
            d=document,
            e=d.documentElement;

            return Math.max(e.clientHeight, w.innerHeight || 0);

          }

          (function() {
            var throttle = function(type, name, obj) {
              obj = obj || window;
              var running = false;
              var func = function() {
                if (running) { return; }
                running = true;
                requestAnimationFrame(function() {
                  obj.dispatchEvent(new CustomEvent(name));
                  running = false;
                });
              };
              obj.addEventListener(type, func);
            };

            throttle("resize", "optimizedResize");

          })();

          // handle event
          window.addEventListener("optimizedResize", function() {

            var newHeight = getHeight();

            if (newHeight > initialHeight && newHeight/initialHeight < 1.3) {
              document.body.classList.add('fullscreen');
            } else {
              document.body.classList.remove('fullscreen');
            }

          });

        }

        function isSafari () {
          var uAStr = navigator.userAgent;
          if (uAStr.indexOf('iPhone') != -1 && uAStr.indexOf('Safari') != -1 && uAStr.indexOf('CriOS') == -1) {
            return true;
          }
        }


      });

    </script>
    <script src="dist/build.js"></script>
  </body>
</html>
